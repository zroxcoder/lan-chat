<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>LAN Messenger</title>
<link rel="icon" href="assets/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="style.css">
</head>
<body>
    
<div id="login">
    <div class="login-box">
        <h2>ğŸ’¬ LAN Messenger</h2>
        <p>Connect with your team instantly</p>
        <input id="username" placeholder="Enter your name..." autocomplete="off">
        <button onclick="join()">START CHATTING</button>
        <p id="status">Connecting to server...</p>
    </div>
</div>

<div id="app">
    <div class="sidebar" id="sidebar">
        <div class="header">
            <button class="icon-btn" onclick="closeSidebar()" id="close-btn">
                <i class="fa-solid fa-times"></i>
            </button>
            <div id="current-user" style="display:flex;align-items:center;gap:10px;padding:10px;border-radius:12px;background:var(--glass);backdrop-filter:blur(10px);cursor:pointer;flex:1;" onclick="document.getElementById('avatar-input').click()">
                <img id="current-avatar" src="" class="avatar" style="width:40px;height:40px;">
                <div style="flex:1;">
                    <div id="current-name" style="font-weight:600;font-size:14px;"></div>
                    <div style="font-size:10px;color:var(--text-muted);">Online</div>
                </div>
                <button class="icon-btn" onclick="logout(event)" title="Logout" style="margin-left:auto;margin-right:5px;">
                    <i class="fa-solid fa-sign-out-alt"></i>
                </button>
                <i class="fa-solid fa-camera" style="font-size:12px;color:var(--text-muted);"></i>
            </div>
        </div>
        <div class="section-label">
            CHANNELS 
            <i class="fa-solid fa-plus icon-btn" onclick="event.stopPropagation(); createChannel();"></i>
        </div>
        <div id="channels"></div>
        <div class="section-label" style="margin-top: 15px;">ONLINE USERS</div>
        <div id="users"></div>
    </div>
    <div class="sidebar-overlay" id="sidebar-overlay"></div>
    <div class="chat-area">
        <div class="header">
            <div style="display:flex;align-items:center;gap:10px;min-width:0;flex:1;">
                <button class="icon-btn" id="menu-btn" onclick="toggleSidebar()">
                    <i class="fa-solid fa-bars"></i>
                </button>
                <div id="chat-title" style="font-weight:700;font-size:16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">General</div>
            </div>
        </div>

        <div id="messages"></div>

        <div class="input-area">
            <button class="icon-btn" onclick="document.getElementById('file-input').click()" title="Upload file">
                <i class="fa-solid fa-paperclip"></i>
            </button>
            <input id="msg-input" placeholder="Type a message..." onkeypress="handleEnter(event)">
            <button class="icon-btn" onclick="toggleStickerPicker()" title="Send sticker/GIF">
                <i class="fa-solid fa-smile"></i>
            </button>
            <button class="icon-btn" id="mic-btn" onmousedown="startVoiceRecord()" onmouseup="stopVoiceRecord()" onmouseleave="stopVoiceRecord()" ontouchstart="startVoiceRecord()" ontouchend="stopVoiceRecord()" ontouchcancel="stopVoiceRecord()" title="Hold to record voice">
                <i class="fa-solid fa-microphone"></i>
            </button>
            <button class="icon-btn" onclick="sendMsg()" title="Send message">
                <i class="fa-solid fa-paper-plane"></i>
            </button>
        </div>
        <div id="sticker-picker" style="display:none;position:absolute;bottom:60px;right:10px;background:var(--glass);backdrop-filter:blur(10px);border-radius:12px;padding:10px;max-width:300px;z-index:1000;">
            <div style="display:flex;flex-wrap:wrap;gap:5px;max-height:200px;overflow-y:auto;">
                <span onclick="sendSticker('ğŸ˜€')" style="cursor:pointer;font-size:24px;">ğŸ˜€</span>
                <span onclick="sendSticker('ğŸ˜‚')" style="cursor:pointer;font-size:24px;">ğŸ˜‚</span>
                <span onclick="sendSticker('â¤ï¸')" style="cursor:pointer;font-size:24px;">â¤ï¸</span>
                <span onclick="sendSticker('ğŸ‘')" style="cursor:pointer;font-size:24px;">ğŸ‘</span>
                <span onclick="sendSticker('ğŸ”¥')" style="cursor:pointer;font-size:24px;">ğŸ”¥</span>
                <span onclick="sendSticker('ğŸ‰')" style="cursor:pointer;font-size:24px;">ğŸ‰</span>
                <span onclick="sendSticker('ğŸ˜')" style="cursor:pointer;font-size:24px;">ğŸ˜</span>
                <span onclick="sendSticker('ğŸ¤”')" style="cursor:pointer;font-size:24px;">ğŸ¤”</span>
                <span onclick="sendSticker('ğŸ˜¢')" style="cursor:pointer;font-size:24px;">ğŸ˜¢</span>
                <span onclick="sendSticker('ğŸ‘')" style="cursor:pointer;font-size:24px;">ğŸ‘</span>
                <span onclick="sendSticker('ğŸ’¯')" style="cursor:pointer;font-size:24px;">ğŸ’¯</span>
                <span onclick="sendSticker('ğŸš€')" style="cursor:pointer;font-size:24px;">ğŸš€</span>
                <span onclick="sendSticker('ğŸ˜Š')" style="cursor:pointer;font-size:24px;">ğŸ˜Š</span>
                <span onclick="sendSticker('ğŸ˜')" style="cursor:pointer;font-size:24px;">ğŸ˜</span>
                <span onclick="sendSticker('ğŸ¥°')" style="cursor:pointer;font-size:24px;">ğŸ¥°</span>
                <span onclick="sendSticker('ğŸ˜˜')" style="cursor:pointer;font-size:24px;">ğŸ˜˜</span>
                <span onclick="sendSticker('ğŸ˜‰')" style="cursor:pointer;font-size:24px;">ğŸ˜‰</span>
                <span onclick="sendSticker('ğŸ˜œ')" style="cursor:pointer;font-size:24px;">ğŸ˜œ</span>
                <span onclick="sendSticker('ğŸ¤ª')" style="cursor:pointer;font-size:24px;">ğŸ¤ª</span>
                <span onclick="sendSticker('ğŸ˜')" style="cursor:pointer;font-size:24px;">ğŸ˜</span>
                <span onclick="sendSticker('ğŸ¤‘')" style="cursor:pointer;font-size:24px;">ğŸ¤‘</span>
                <span onclick="sendSticker('ğŸ¤—')" style="cursor:pointer;font-size:24px;">ğŸ¤—</span>
                <span onclick="sendSticker('ğŸ¤­')" style="cursor:pointer;font-size:24px;">ğŸ¤­</span>
                <span onclick="sendSticker('ğŸ¤«')" style="cursor:pointer;font-size:24px;">ğŸ¤«</span>
                <span onclick="sendSticker('ğŸ¤¨')" style="cursor:pointer;font-size:24px;">ğŸ¤¨</span>
                <span onclick="sendSticker('ğŸ˜')" style="cursor:pointer;font-size:24px;">ğŸ˜</span>
                <span onclick="sendSticker('ğŸ˜‘')" style="cursor:pointer;font-size:24px;">ğŸ˜‘</span>
                <span onclick="sendSticker('ğŸ˜¶')" style="cursor:pointer;font-size:24px;">ğŸ˜¶</span>
                <span onclick="sendSticker('ğŸ˜')" style="cursor:pointer;font-size:24px;">ğŸ˜</span>
                <span onclick="sendSticker('ğŸ˜’')" style="cursor:pointer;font-size:24px;">ğŸ˜’</span>
                <span onclick="sendSticker('ğŸ™„')" style="cursor:pointer;font-size:24px;">ğŸ™„</span>
                <span onclick="sendSticker('ğŸ˜¬')" style="cursor:pointer;font-size:24px;">ğŸ˜¬</span>
                <span onclick="sendSticker('ğŸ¤¥')" style="cursor:pointer;font-size:24px;">ğŸ¤¥</span>
                <span onclick="sendSticker('ğŸ˜”')" style="cursor:pointer;font-size:24px;">ğŸ˜”</span>
                <span onclick="sendSticker('ğŸ˜ª')" style="cursor:pointer;font-size:24px;">ğŸ˜ª</span>
                <span onclick="sendSticker('ğŸ¤¤')" style="cursor:pointer;font-size:24px;">ğŸ¤¤</span>
                <span onclick="sendSticker('ğŸ˜´')" style="cursor:pointer;font-size:24px;">ğŸ˜´</span>
                <span onclick="sendSticker('ğŸ˜·')" style="cursor:pointer;font-size:24px;">ğŸ˜·</span>
                <span onclick="sendSticker('ğŸ¤’')" style="cursor:pointer;font-size:24px;">ğŸ¤’</span>
                <span onclick="sendSticker('ğŸ¤•')" style="cursor:pointer;font-size:24px;">ğŸ¤•</span>
                <span onclick="sendSticker('ğŸ¤¢')" style="cursor:pointer;font-size:24px;">ğŸ¤¢</span>
                <span onclick="sendSticker('ğŸ¤®')" style="cursor:pointer;font-size:24px;">ğŸ¤®</span>
                <span onclick="sendSticker('ğŸ¤§')" style="cursor:pointer;font-size:24px;">ğŸ¤§</span>
                <span onclick="sendSticker('ğŸ¥µ')" style="cursor:pointer;font-size:24px;">ğŸ¥µ</span>
                <span onclick="sendSticker('ğŸ¥¶')" style="cursor:pointer;font-size:24px;">ğŸ¥¶</span>
                <span onclick="sendSticker('ğŸ¥´')" style="cursor:pointer;font-size:24px;">ğŸ¥´</span>
                <span onclick="sendSticker('ğŸ˜µ')" style="cursor:pointer;font-size:24px;">ğŸ˜µ</span>
                <span onclick="sendSticker('ğŸ¤¯')" style="cursor:pointer;font-size:24px;">ğŸ¤¯</span>
                <span onclick="sendSticker('ğŸ¤ ')" style="cursor:pointer;font-size:24px;">ğŸ¤ </span>
                <span onclick="sendSticker('ğŸ¥³')" style="cursor:pointer;font-size:24px;">ğŸ¥³</span>
                <span onclick="sendSticker('ğŸ¥¸')" style="cursor:pointer;font-size:24px;">ğŸ¥¸</span>
                <span onclick="sendSticker('ğŸ˜‡')" style="cursor:pointer;font-size:24px;">ğŸ˜‡</span>
                <span onclick="sendSticker('ğŸ‘¹')" style="cursor:pointer;font-size:24px;">ğŸ‘¹</span>
                <span onclick="sendSticker('ğŸ‘º')" style="cursor:pointer;font-size:24px;">ğŸ‘º</span>
                <span onclick="sendSticker('ğŸ’€')" style="cursor:pointer;font-size:24px;">ğŸ’€</span>
                <span onclick="sendSticker('ğŸ‘»')" style="cursor:pointer;font-size:24px;">ğŸ‘»</span>
                <span onclick="sendSticker('ğŸ‘½')" style="cursor:pointer;font-size:24px;">ğŸ‘½</span>
                <span onclick="sendSticker('ğŸ¤–')" style="cursor:pointer;font-size:24px;">ğŸ¤–</span>
                <span onclick="sendSticker('ğŸƒ')" style="cursor:pointer;font-size:24px;">ğŸƒ</span>
                <span onclick="sendSticker('ğŸ˜º')" style="cursor:pointer;font-size:24px;">ğŸ˜º</span>
                <span onclick="sendSticker('ğŸ˜¸')" style="cursor:pointer;font-size:24px;">ğŸ˜¸</span>
                <span onclick="sendSticker('ğŸ˜¹')" style="cursor:pointer;font-size:24px;">ğŸ˜¹</span>
                <span onclick="sendSticker('ğŸ˜»')" style="cursor:pointer;font-size:24px;">ğŸ˜»</span>
                <span onclick="sendSticker('ğŸ˜¼')" style="cursor:pointer;font-size:24px;">ğŸ˜¼</span>
                <span onclick="sendSticker('ğŸ˜½')" style="cursor:pointer;font-size:24px;">ğŸ˜½</span>
                <span onclick="sendSticker('ğŸ™€')" style="cursor:pointer;font-size:24px;">ğŸ™€</span>
                <span onclick="sendSticker('ğŸ˜¿')" style="cursor:pointer;font-size:24px;">ğŸ˜¿</span>
                <span onclick="sendSticker('ğŸ˜¾')" style="cursor:pointer;font-size:24px;">ğŸ˜¾</span>
                <span onclick="sendSticker('ğŸ‘‹')" style="cursor:pointer;font-size:24px;">ğŸ‘‹</span>
                <span onclick="sendSticker('ğŸ¤š')" style="cursor:pointer;font-size:24px;">ğŸ¤š</span>
                <span onclick="sendSticker('ğŸ–ï¸')" style="cursor:pointer;font-size:24px;">ğŸ–ï¸</span>
                <span onclick="sendSticker('âœ‹')" style="cursor:pointer;font-size:24px;">âœ‹</span>
                <span onclick="sendSticker('ğŸ––')" style="cursor:pointer;font-size:24px;">ğŸ––</span>
                <span onclick="sendSticker('ğŸ‘Œ')" style="cursor:pointer;font-size:24px;">ğŸ‘Œ</span>
                <span onclick="sendSticker('ğŸ¤')" style="cursor:pointer;font-size:24px;">ğŸ¤</span>
                <span onclick="sendSticker('âœŒï¸')" style="cursor:pointer;font-size:24px;">âœŒï¸</span>
                <span onclick="sendSticker('ğŸ¤')" style="cursor:pointer;font-size:24px;">ğŸ¤</span>
                <span onclick="sendSticker('ğŸ¤Ÿ')" style="cursor:pointer;font-size:24px;">ğŸ¤Ÿ</span>
                <span onclick="sendSticker('ğŸ¤˜')" style="cursor:pointer;font-size:24px;">ğŸ¤˜</span>
                <span onclick="sendSticker('ğŸ¤™')" style="cursor:pointer;font-size:24px;">ğŸ¤™</span>
                <span onclick="sendSticker('ğŸ‘ˆ')" style="cursor:pointer;font-size:24px;">ğŸ‘ˆ</span>
                <span onclick="sendSticker('ğŸ‘‰')" style="cursor:pointer;font-size:24px;">ğŸ‘‰</span>
                <span onclick="sendSticker('ğŸ‘†')" style="cursor:pointer;font-size:24px;">ğŸ‘†</span>
                <span onclick="sendSticker('ğŸ–•')" style="cursor:pointer;font-size:24px;">ğŸ–•</span>
                <span onclick="sendSticker('ğŸ‘‡')" style="cursor:pointer;font-size:24px;">ğŸ‘‡</span>
                <span onclick="sendSticker('â˜ï¸')" style="cursor:pointer;font-size:24px;">â˜ï¸</span>
                <span onclick="sendSticker('ğŸ‘')" style="cursor:pointer;font-size:24px;">ğŸ‘</span>
                <span onclick="sendSticker('ğŸ‘')" style="cursor:pointer;font-size:24px;">ğŸ‘</span>
                <span onclick="sendSticker('ğŸ‘Š')" style="cursor:pointer;font-size:24px;">ğŸ‘Š</span>
                <span onclick="sendSticker('âœŠ')" style="cursor:pointer;font-size:24px;">âœŠ</span>
                <span onclick="sendSticker('ğŸ¤›')" style="cursor:pointer;font-size:24px;">ğŸ¤›</span>
                <span onclick="sendSticker('ğŸ¤œ')" style="cursor:pointer;font-size:24px;">ğŸ¤œ</span>
                <span onclick="sendSticker('ğŸ‘')" style="cursor:pointer;font-size:24px;">ğŸ‘</span>
                <span onclick="sendSticker('ğŸ™Œ')" style="cursor:pointer;font-size:24px;">ğŸ™Œ</span>
                <span onclick="sendSticker('ğŸ‘')" style="cursor:pointer;font-size:24px;">ğŸ‘</span>
                <span onclick="sendSticker('ğŸ¤²')" style="cursor:pointer;font-size:24px;">ğŸ¤²</span>
                <span onclick="sendSticker('ğŸ¤')" style="cursor:pointer;font-size:24px;">ğŸ¤</span>
                <span onclick="sendSticker('ğŸ™')" style="cursor:pointer;font-size:24px;">ğŸ™</span>
                <span onclick="sendSticker('âœï¸')" style="cursor:pointer;font-size:24px;">âœï¸</span>
                <span onclick="sendSticker('ğŸ’…')" style="cursor:pointer;font-size:24px;">ğŸ’…</span>
                <span onclick="sendSticker('ğŸ¤³')" style="cursor:pointer;font-size:24px;">ğŸ¤³</span>
                <span onclick="sendSticker('ğŸ’ª')" style="cursor:pointer;font-size:24px;">ğŸ’ª</span>
                <span onclick="sendSticker('ğŸ¦¾')" style="cursor:pointer;font-size:24px;">ğŸ¦¾</span>
                <span onclick="sendSticker('ğŸ¦¿')" style="cursor:pointer;font-size:24px;">ğŸ¦¿</span>
                <span onclick="sendSticker('ğŸ¦µ')" style="cursor:pointer;font-size:24px;">ğŸ¦µ</span>
                <span onclick="sendSticker('ğŸ¦¶')" style="cursor:pointer;font-size:24px;">ğŸ¦¶</span>
                <span onclick="sendSticker('ğŸ‘‚')" style="cursor:pointer;font-size:24px;">ğŸ‘‚</span>
                <span onclick="sendSticker('ğŸ¦»')" style="cursor:pointer;font-size:24px;">ğŸ¦»</span>
                <span onclick="sendSticker('ğŸ‘ƒ')" style="cursor:pointer;font-size:24px;">ğŸ‘ƒ</span>
                <span onclick="sendSticker('ğŸ§ ')" style="cursor:pointer;font-size:24px;">ğŸ§ </span>
                <span onclick="sendSticker('ğŸ«€')" style="cursor:pointer;font-size:24px;">ğŸ«€</span>
                <span onclick="sendSticker('ğŸ«')" style="cursor:pointer;font-size:24px;">ğŸ«</span>
                <span onclick="sendSticker('ğŸ¦·')" style="cursor:pointer;font-size:24px;">ğŸ¦·</span>
                <span onclick="sendSticker('ğŸ¦´')" style="cursor:pointer;font-size:24px;">ğŸ¦´</span>
                <span onclick="sendSticker('ğŸ‘€')" style="cursor:pointer;font-size:24px;">ğŸ‘€</span>
                <span onclick="sendSticker('ğŸ‘ï¸')" style="cursor:pointer;font-size:24px;">ğŸ‘ï¸</span>
                <span onclick="sendSticker('ğŸ‘…')" style="cursor:pointer;font-size:24px;">ğŸ‘…</span>
                <span onclick="sendSticker('ğŸ‘„')" style="cursor:pointer;font-size:24px;">ğŸ‘„</span>
                <span onclick="sendSticker('ğŸ’‹')" style="cursor:pointer;font-size:24px;">ğŸ’‹</span>
                <span onclick="sendSticker('ğŸ©¸')" style="cursor:pointer;font-size:24px;">ğŸ©¸</span>
            </div>
            <div style="margin-top:10px;">
                <input id="gif-url" placeholder="Paste GIF URL..." style="width:100%;padding:5px;border-radius:5px;border:none;background:var(--input-bg);color:var(--text);">
                <button onclick="sendGif()" style="margin-top:5px;width:100%;padding:5px;background:var(--primary);color:white;border:none;border-radius:5px;">Send GIF</button>
            </div>
        </div>
        <input type="file" id="file-input" hidden onchange="uploadFile()">
        <input type="file" id="avatar-input" hidden accept="image/*" onchange="uploadAvatar()">
    </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script src="script.js"></script>
</body>
</html>